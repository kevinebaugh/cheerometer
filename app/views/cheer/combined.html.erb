<div class="h-screen w-screen bg-gradient-to-br from-red-500 via-pink-500 to-purple-600 relative overflow-hidden flex flex-col select-none fixed inset-0" data-controller="confetti">
  <h1 class="text-lg sm:text-xl md:text-2xl font-bold text-white text-center pt-1 sm:pt-2 drop-shadow-lg flex-shrink-0 select-none">ðŸŽ„ Cheer-O-Meter ðŸŽ„</h1>

  <!-- Gauge Section -->
  <div class="flex justify-center items-center flex-shrink min-h-0 py-1 sm:py-2" style="flex: 0 0 30vh; max-height: 30vh;">
    <div
      data-controller="gauge"
      data-gauge-score-value="<%= @score %>"
      class="gauge-container relative w-full max-w-[75vw] h-full"
    >
      <svg width="100%" height="100%" viewBox="0 0 300 180" class="gauge-svg" preserveAspectRatio="xMidYMid meet">
        <!-- Background arc -->
        <path
          class="gauge-background"
          d="M 50 150 A 100 100 0 0 1 250 150"
          fill="none"
          stroke="#ffffff"
          stroke-width="30"
          stroke-linecap="round"
          opacity="0.3"
        />
        <!-- Gauge fill arc -->
        <path
          class="gauge-fill"
          d="M 50 150 A 100 100 0 0 1 250 150"
          fill="none"
          stroke="#10b981"
          stroke-width="30"
          stroke-linecap="round"
          stroke-dasharray="314.16"
          stroke-dashoffset="314.16"
          style="filter: drop-shadow(0 0 10px rgba(16, 185, 129, 0.5));"
        />
      </svg>
      <!-- Score display -->
      <div class="absolute bottom-2 sm:bottom-4 md:bottom-6 left-1/2 transform -translate-x-1/2 text-center px-2 sm:px-4 md:px-6 py-1 sm:py-2 select-none">
        <div class="text-2xl sm:text-4xl md:text-6xl font-bold text-white gauge-score drop-shadow-2xl select-none"><%= @score %></div>
      </div>
    </div>
  </div>

  <!-- Button Section -->
  <div class="flex justify-center items-center flex-1 min-h-0 pb-2 sm:pb-3 md:pb-4">
    <button data-controller="cheer" class="w-[55vmin] h-[55vmin] max-w-[350px] max-h-[350px] rounded-full bg-gradient-to-br from-green-400 via-green-500 to-green-600 text-white text-xl sm:text-2xl md:text-3xl font-bold shadow-[0_20px_40px_rgba(0,0,0,0.3),0_0_0_8px_rgba(255,255,255,0.2),inset_0_4px_8px_rgba(0,0,0,0.2),inset_0_-4px_8px_rgba(0,0,0,0.1)] active:scale-[0.92] active:shadow-[0_5px_15px_rgba(0,0,0,0.4),0_0_0_8px_rgba(255,255,255,0.15),inset_0_6px_12px_rgba(0,0,0,0.4)] active:brightness-90 hover:scale-105 whitespace-nowrap relative z-10 select-none touch-manipulation transition-all duration-50">
      Cheer!
    </button>
  </div>

  <!-- Hidden list for initial data -->
  <ul class="recent-cheers-list hidden">
    <% @recent_cheers_data.each do |cheer| %>
    <li data-location="<%= format_location(cheer["city"], cheer["country"], cheer["id"] || cheer["created_at"]) %>"></li>
    <% end %>
  </ul>

  <!-- Container for flying location elements -->
  <div class="flying-locations-container fixed inset-0 pointer-events-none z-10"></div>
</div>
